Last updated: 2026-02-20

# Project Overview

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
- VOICEVOXãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒãƒ¼ã¨é€£æºã—ã€ãƒ†ã‚­ã‚¹ãƒˆã‚’éŸ³å£°ã«å¤‰æ›ã—ã¦å†ç”Ÿã™ã‚‹Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚
- èª°ã§ã‚‚ç°¡å˜ã«VOICEVOXã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒªã‚’é–‹ç™ºã§ãã‚‹ã“ã¨ã‚’å®Ÿè¨¼ã—ã€æ‰‹è»½ãªåˆ©ç”¨ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚
- VOICEVOXã‚µãƒ¼ãƒãƒ¼èµ·å‹•æ¸ˆã¿ã§ã‚ã‚Œã°ã€Webãƒšãƒ¼ã‚¸ã‚’é–‹ãã ã‘ã§éŸ³å£°å†ç”ŸãŒå¯èƒ½ãªä½“é¨“ã‚’æä¾›ã—ã¾ã™ã€‚

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: **Vite** (é«˜é€Ÿãªé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã¨ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã‚’æä¾›ã—ã€ãƒ¢ãƒ€ãƒ³ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã‚’æ”¯æ´), **TypeScript** (JavaScriptã«é™çš„å‹ä»˜ã‘ã‚’è¿½åŠ ã—ã€å¤§è¦æ¨¡ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã«ãŠã‘ã‚‹å …ç‰¢æ€§ã¨ä¿å®ˆæ€§ã‚’å‘ä¸Šã•ã›ã¾ã™)
- éŸ³æ¥½ãƒ»ã‚ªãƒ¼ãƒ‡ã‚£ã‚ª: **Tone.js v15** (Web Audio APIã‚’æŠ½è±¡åŒ–ã—ã€é«˜åº¦ãªéŸ³å£°å‡¦ç†ã¨å†ç”Ÿã‚’å®¹æ˜“ã«ã™ã‚‹JavaScriptãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯), **VOICEVOX API** (VOICEVOXãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒãƒ¼ã¨é€£æºã—ã€éŸ³å£°åˆæˆæ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™)
- é–‹ç™ºãƒ„ãƒ¼ãƒ«: **Vite** (é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã€ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«), **TypeScript** (å‹ãƒã‚§ãƒƒã‚¯), **JSDOM** (Node.jsç’°å¢ƒã§ãƒ–ãƒ©ã‚¦ã‚¶ã®DOMç’°å¢ƒã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã—ã€ä¸»ã«ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã«ä½¿ç”¨ã•ã‚Œã¾ã™)
- ãƒ†ã‚¹ãƒˆ: **Vitest** (Viteãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«æœ€é©åŒ–ã•ã‚ŒãŸé«˜é€Ÿã§æ©Ÿèƒ½è±Šå¯Œãªå˜ä½“ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯)
- ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«: **Vite** (Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ã‚’ç®¡ç†ã—ã€æœ€é©åŒ–ã•ã‚ŒãŸãƒãƒ³ãƒ‰ãƒ«ã‚’ç”Ÿæˆã—ã¾ã™)
- è¨€èªæ©Ÿèƒ½: **TypeScript** (JavaScriptã®ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚»ãƒƒãƒˆã¨ã—ã¦ã€å¼·åŠ›ãªå‹ã‚·ã‚¹ãƒ†ãƒ ã¨ESNextã®æ©Ÿèƒ½ã‚’æä¾›ã—ã€ã‚³ãƒ¼ãƒ‰ã®å“è³ªã¨ç”Ÿç”£æ€§ã‚’å‘ä¸Šã•ã›ã¾ã™)
- è‡ªå‹•åŒ–ãƒ»CI/CD: (ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±ã«ã¯ç›´æ¥ã®è¨˜è¿°ãŒã‚ã‚Šã¾ã›ã‚“ãŒã€GitHub Actionsã«ã‚ˆã‚‹è‡ªå‹•ç¿»è¨³ãŒè¨€åŠã•ã‚Œã¦ãŠã‚Šã€ç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ä¸€ç’°ã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™)
- é–‹ç™ºæ¨™æº–: **Biome.js** (ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ã¨ãƒªãƒ³ã‚¿ãƒ¼ã‚’çµ±åˆã—ã€ã‚³ãƒ¼ãƒ‰ã®æ•´å½¢ã€ãƒã‚°ã®æ¤œå‡ºã€ä¸€è²«æ€§ã®ç¢ºä¿ã‚’é€šã˜ã¦é–‹ç™ºæ¨™æº–ã‚’ç¶­æŒã—ã¾ã™)

## ãƒ•ã‚¡ã‚¤ãƒ«éšå±¤ãƒ„ãƒªãƒ¼
```
ğŸ“„ .gitignore
ğŸ“– AGENTS.md
ğŸ“„ LICENSE
ğŸ“– README.ja.md
ğŸ“– README.md
ğŸ“Š biome.json
ğŸ“ generated-docs/
ğŸŒ index.html
ğŸ“Š package-lock.json
ğŸ“Š package.json
ğŸ“ src/
  ğŸ“˜ audio.ts
  ğŸ“˜ config.ts
  ğŸ“˜ intonation.test.ts
  ğŸ“˜ intonation.ts
  ğŸ“˜ intonationDisplay.ts
  ğŸ“˜ intonationPlayback.ts
  ğŸ“˜ intonationState.ts
  ğŸ“˜ intonationUtils.ts
  ğŸ“˜ main.ts
  ğŸ“˜ playback.test.ts
  ğŸ“˜ playback.ts
  ğŸ“˜ state.ts
  ğŸ“˜ status.ts
  ğŸ“˜ styleManager.test.ts
  ğŸ“˜ styleManager.ts
  ğŸ“ styles/
    ğŸ¨ base.css
    ğŸ¨ intonation.css
  ğŸ¨ styles.css
  ğŸ“˜ textLists.test.ts
  ğŸ“˜ textLists.ts
  ğŸ“˜ uiControls.ts
  ğŸ“ visualization/
    ğŸ“˜ canvas.ts
    ğŸ“˜ fft.ts
    ğŸ“˜ fftMaxFreq.ts
    ğŸ“˜ fftOverlay.test.ts
    ğŸ“˜ fftOverlay.ts
    ğŸ“˜ fftUtils.ts
    ğŸ“˜ spectrogram.ts
    ğŸ“˜ timeAxis.ts
    ğŸ“˜ waveform.ts
  ğŸ“˜ visualization.test.ts
  ğŸ“˜ visualization.ts
  ğŸ“˜ vite-env.d.ts
ğŸ“Š tsconfig.json
ğŸ“˜ vite.config.ts
```

## ãƒ•ã‚¡ã‚¤ãƒ«è©³ç´°èª¬æ˜
- **index.html**: Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã¨ãªã‚‹HTMLãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚UIã®åŸºæœ¬çš„ãªæ§‹é€ ã‚’å®šç¾©ã—ã€JavaScriptã®ã‚¨ãƒ³ãƒˆãƒªã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚
- **src/audio.ts**: VOICEVOX APIã¨é€£æºã—ã€éŸ³å£°ã‚¯ã‚¨ãƒªã®å–å¾—ã€éŸ³å£°åˆæˆã€ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒãƒƒãƒ•ã‚¡ã®çµåˆãƒ»ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã¨ã„ã£ãŸéŸ³å£°ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’æä¾›ã—ã¾ã™ã€‚
- **src/config.ts**: VOICEVOXã‚µãƒ¼ãƒãƒ¼ã®URLã‚„å„ç¨®è¨­å®šå€¤ã€å®šæ•°ãªã©ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã®æ§‹æˆæƒ…å ±ã‚’å®šç¾©ã—ã¾ã™ã€‚
- **src/intonation.test.ts**: `src/intonation.ts`ã§å®šç¾©ã•ã‚ŒãŸã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆã‚¢ã‚¯ã‚»ãƒ³ãƒˆï¼‰ç·¨é›†æ©Ÿèƒ½ã«é–¢ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚
- **src/intonation.ts**: VOICEVOXã®ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ç·¨é›†æ©Ÿèƒ½ã®ä¸­æ ¸ã‚’æ‹…ã„ã¾ã™ã€‚ã‚¢ã‚¯ã‚»ãƒ³ãƒˆå¥ã®ãƒ”ãƒƒãƒèª¿æ•´ã€ãŠæ°—ã«å…¥ã‚Šã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ã®ç®¡ç†ã€UIè¡¨ç¤ºã®æ›´æ–°ãƒ­ã‚¸ãƒƒã‚¯ãªã©ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚
- **src/intonationDisplay.ts**: ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ç·¨é›†ãƒãƒ£ãƒ¼ãƒˆã®æç”»ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆãƒã‚¦ã‚¹æ“ä½œã€ãƒ›ã‚¤ãƒ¼ãƒ«æ“ä½œï¼‰å‡¦ç†ã‚’æ‹…å½“ã—ã¾ã™ã€‚ãƒ”ãƒƒãƒãƒ¬ãƒ³ã‚¸ã®è¨ˆç®—ã‚„è¡¨ç¤ºç¯„å›²ã®èª¿æ•´ã‚‚è¡Œã„ã¾ã™ã€‚
- **src/intonationPlayback.ts**: ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ç·¨é›†å¾Œã®éŸ³å£°å†ç”Ÿã‚’ç®¡ç†ã—ã¾ã™ã€‚å¤‰æ›´ã•ã‚ŒãŸã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚’é©ç”¨ã—ãŸéŸ³å£°ã®ãƒ•ã‚§ãƒƒãƒã¨å†ç”Ÿã€å†ç”Ÿã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®è¡¨ç¤ºãªã©ã‚’è¡Œã„ã¾ã™ã€‚
- **src/intonationState.ts**: ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ç·¨é›†ã®çŠ¶æ…‹ï¼ˆç¾åœ¨ã®ãƒ”ãƒƒãƒãƒã‚¤ãƒ³ãƒˆã€ã‚¿ã‚¤ãƒŸãƒ³ã‚°æƒ…å ±ãªã©ï¼‰ã‚’ç®¡ç†ã—ã€ãã®æ›´æ–°ãƒ­ã‚¸ãƒƒã‚¯ã‚’æä¾›ã—ã¾ã™ã€‚
- **src/intonationUtils.ts**: ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³é–¢é€£ã®å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ï¼ˆAudioQueryã®å½¢çŠ¶æ¤œè¨¼ã€ã‚¯ãƒ­ãƒ¼ãƒ³ãªã©ï¼‰ã‚’æä¾›ã—ã¾ã™ã€‚
- **src/main.ts**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®åˆæœŸåŒ–å‡¦ç†ã€ä¸»è¦ãªã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®ç™»éŒ²ã€ã‚¹ã‚¿ã‚¤ãƒ«é¸æŠã®é©ç”¨ã€ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ ã‚¹ã‚±ãƒ¼ãƒ«ã®æ›´æ–°ãªã©ã€å…¨ä½“ã®èª¿æ•´ã‚’è¡Œã†ãƒ¡ã‚¤ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã™ã€‚
- **src/playback.test.ts**: `src/playback.ts`ã§å®šç¾©ã•ã‚ŒãŸéŸ³å£°å†ç”Ÿæ©Ÿèƒ½ã«é–¢ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚
- **src/playback.ts**: éŸ³å£°å†ç”Ÿæ©Ÿèƒ½ã®åˆ¶å¾¡ï¼ˆå†ç”Ÿ/åœæ­¢ã€ãƒ«ãƒ¼ãƒ—ã€è‡ªå‹•å†ç”Ÿï¼‰ã€éŸ³å£°ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€å†ç”ŸçŠ¶æ…‹ã®ç®¡ç†ã€å†ç”Ÿå‰å‡¦ç†ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚
- **src/state.ts**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªçŠ¶æ…‹ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã®ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã™ã€‚
- **src/status.ts**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¡¨ç¤º/éè¡¨ç¤ºã€è¡¨ç¤ºã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç®¡ç†ã€CSSã‚«ã‚¹ã‚¿ãƒ å¤‰æ•°ã®ã‚«ãƒ©ãƒ¼ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†ãªã©ã‚’è¡Œã„ã¾ã™ã€‚
- **src/styleManager.test.ts**: `src/styleManager.ts`ã§å®šç¾©ã•ã‚ŒãŸã‚¹ã‚¿ã‚¤ãƒ«ç®¡ç†æ©Ÿèƒ½ã«é–¢ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚
- **src/styleManager.ts**: VOICEVOXã®åˆ©ç”¨å¯èƒ½ãªã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆè©±è€…ã€ã‚¹ã‚¿ã‚¤ãƒ«ï¼‰æƒ…å ±ã®å–å¾—ã€é¸æŠã€UIã¸ã®åæ˜ ã€ãƒ†ã‚­ã‚¹ãƒˆã®ã‚»ã‚°ãƒ¡ãƒ³ãƒˆåŒ–ãƒ­ã‚¸ãƒƒã‚¯ãªã©ã‚’ç®¡ç†ã—ã¾ã™ã€‚
- **src/styles/base.css**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã®åŸºæœ¬çš„ãªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã€ãƒ•ã‚©ãƒ³ãƒˆã€ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆãªã©ã‚’å®šç¾©ã™ã‚‹ãƒ™ãƒ¼ã‚¹ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆã§ã™ã€‚
- **src/styles/intonation.css**: ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ç·¨é›†ãƒãƒ£ãƒ¼ãƒˆã‚„é–¢é€£UIè¦ç´ ã®ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ã‚’å®šç¾©ã™ã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆã§ã™ã€‚
- **src/styles.css**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã®ä¸»è¦ãªã‚¹ã‚¿ã‚¤ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ»å®šç¾©ã™ã‚‹ã‚¨ãƒ³ãƒˆãƒªã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆã§ã™ã€‚
- **src/textLists.test.ts**: `src/textLists.ts`ã§å®šç¾©ã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆãƒªã‚¹ãƒˆæ©Ÿèƒ½ã«é–¢ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚
- **src/textLists.ts**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…¥åŠ›ã—ãŸãƒ†ã‚­ã‚¹ãƒˆã®å±¥æ­´ã‚„ãŠæ°—ã«å…¥ã‚Šãƒªã‚¹ãƒˆã‚’ç®¡ç†ã—ã€ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¸ã®æ°¸ç¶šåŒ–ã€UIã¸ã®æç”»ã€ãƒªã‚¹ãƒˆæ“ä½œãƒ­ã‚¸ãƒƒã‚¯ã‚’æä¾›ã—ã¾ã™ã€‚
- **src/uiControls.ts**: ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒœã‚¿ãƒ³ãªã©ã€ç‰¹å®šã®UIã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã®çŠ¶æ…‹ï¼ˆæœ‰åŠ¹/ç„¡åŠ¹ï¼‰ã‚’æ›´æ–°ã™ã‚‹æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚
- **src/visualization/canvas.ts**: HTML `&lt;canvas&gt;` è¦ç´ ã®æº–å‚™ã¨åŸºæœ¬çš„ãªè¨­å®šã‚’è¡Œã†ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã‚’æä¾›ã—ã¾ã™ã€‚
- **src/visualization/fft.ts**: é«˜é€Ÿãƒ•ãƒ¼ãƒªã‚¨å¤‰æ›ï¼ˆFFTï¼‰ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å®Ÿè£…ã¨ã€ãƒãƒ‹ãƒ³ã‚°çª“é–¢æ•°ã®ç”Ÿæˆæ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚
- **src/visualization/fftMaxFreq.ts**: FFTãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ç‰¹å®šã®é–¾å€¤ä»¥ä¸Šã®æœ€å¤§å‘¨æ³¢æ•°æˆåˆ†ã‚’æ¤œå‡ºã™ã‚‹æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚
- **src/visualization/fftOverlay.test.ts**: `src/visualization/fftOverlay.ts`ã§å®šç¾©ã•ã‚ŒãŸFFTã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤è¡¨ç¤ºæ©Ÿèƒ½ã«é–¢ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚
- **src/visualization/fftOverlay.ts**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ FFTãƒ‡ãƒ¼ã‚¿ã‚’Canvasã«æç”»ã—ã€ãƒ”ãƒ¼ã‚¯å‘¨æ³¢æ•°ã‚„æœ€å¤§å‘¨æ³¢æ•°ãƒ“ãƒ³ãªã©ã®æƒ…å ±ã‚’è¦–è¦šçš„ã«è¡¨ç¤ºã—ã¾ã™ã€‚
- **src/visualization/fftUtils.ts**: FFTãƒ‡ãƒ¼ã‚¿ã¨è¡¨ç¤ºã‚’é–¢é€£ä»˜ã‘ã‚‹ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ï¼ˆXåº§æ¨™ã‹ã‚‰å‘¨æ³¢æ•°ã€å‘¨æ³¢æ•°ã‹ã‚‰ãƒ“ãƒ³ç•ªå·ã€FFTå€¤ã‹ã‚‰Yåº§æ¨™å¤‰æ›ãªã©ï¼‰ã‚’æä¾›ã—ã¾ã™ã€‚
- **src/visualization/spectrogram.ts**: éŸ³å£°ãƒ‡ãƒ¼ã‚¿ã®ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ ï¼ˆæ™‚é–“-å‘¨æ³¢æ•°-å¼·åº¦ã‚°ãƒ©ãƒ•ï¼‰ã‚’ç”Ÿæˆã—ã€Canvasã«æç”»ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚è‰²ãƒãƒƒãƒ”ãƒ³ã‚°ã‚„å¼·åº¦è¨ˆç®—ã‚‚è¡Œã„ã¾ã™ã€‚
- **src/visualization/timeAxis.ts**: å¯è¦–åŒ–ãƒãƒ£ãƒ¼ãƒˆã®æ™‚é–“è»¸ï¼ˆã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ï¼‰ã®ç›®ç››ã‚Šã¨ãƒ©ãƒ™ãƒ«ã‚’ç”Ÿæˆãƒ»æç”»ã™ã‚‹æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚
- **src/visualization/waveform.ts**: éŸ³å£°ã®æ³¢å½¢ã‚’æç”»ã™ã‚‹æ©Ÿèƒ½ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ³¢å½¢ã®æŠ½å‡ºã¨è¡¨ç¤ºã€éŸ³å£°ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã®çµ±è¨ˆè¨ˆç®—ãªã©ã‚’æä¾›ã—ã¾ã™ã€‚
- **src/visualization.test.ts**: `src/visualization.ts`ã§å®šç¾©ã•ã‚ŒãŸéŸ³å£°å¯è¦–åŒ–æ©Ÿèƒ½å…¨èˆ¬ã«é–¢ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚
- **src/visualization.ts**: éŸ³å£°å¯è¦–åŒ–æ©Ÿèƒ½ï¼ˆæ³¢å½¢ã€ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ ã€FFTï¼‰ã‚’çµ±æ‹¬ã—ã¾ã™ã€‚Canvasã®åˆæœŸåŒ–ã€å†ç”Ÿä¸­ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ã€ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã®ç®¡ç†ã€å†ç”Ÿã®é–‹å§‹/åœæ­¢ãƒ­ã‚¸ãƒƒã‚¯ã‚’å«ã¿ã¾ã™ã€‚

## é–¢æ•°è©³ç´°èª¬æ˜
- `getAudioQuery(text: string, speaker: number)` (src/audio.ts): VOICEVOX APIã‹ã‚‰æŒ‡å®šã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã¨è©±è€…ã‚¹ã‚¿ã‚¤ãƒ«ã«åŸºã¥ã„ãŸéŸ³å£°ã‚¯ã‚¨ãƒªã‚’å–å¾—ã—ã¾ã™ã€‚
- `synthesize(query: AudioQuery, speaker: number)` (src/audio.ts): å–å¾—ã—ãŸéŸ³å£°ã‚¯ã‚¨ãƒªã¨è©±è€…ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ç”¨ã„ã¦ã€VOICEVOX APIã§éŸ³å£°åˆæˆã‚’è¡Œã„ã€WAVå½¢å¼ã®éŸ³å£°ãƒ‡ãƒ¼ã‚¿ï¼ˆArrayBufferï¼‰ã‚’è¿”ã—ã¾ã™ã€‚
- `combineAudioBuffers(buffers: AudioBuffer[])` (src/audio.ts): è¤‡æ•°ã®AudioBufferã‚’çµåˆã—ã€ä¸€ã¤ã®AudioBufferã¨ã—ã¦è¿”ã—ã¾ã™ã€‚
- `encodeAudioBufferToWav(audioBuffer: AudioBuffer)` (src/audio.ts): AudioBufferã‚’WAVå½¢å¼ã®Blobãƒ‡ãƒ¼ã‚¿ã«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã¾ã™ã€‚
- `writeString(view: DataView, offset: number, s: string)` (src/audio.ts): DataViewã«æ–‡å­—åˆ—ã‚’æ›¸ãè¾¼ã¿ã€æ¬¡ã®æ›¸ãè¾¼ã¿ã‚ªãƒ•ã‚»ãƒƒãƒˆã‚’è¿”ã—ã¾ã™ã€‚
- `clamp(value: number, min: number, max: number)` (src/audio.ts): æŒ‡å®šã•ã‚ŒãŸå€¤ã‚’æœ€å°å€¤ã¨æœ€å¤§å€¤ã®é–“ã«ã‚¯ãƒ©ãƒ³ãƒ—ï¼ˆåˆ¶é™ï¼‰ã—ã¾ã™ã€‚
- `dedupeIntonationFavorites(favorites: IntonationFavorite[])` (src/intonation.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ã®ãŠæ°—ã«å…¥ã‚Šãƒªã‚¹ãƒˆã‹ã‚‰é‡è¤‡ã‚¨ãƒ³ãƒˆãƒªã‚’å‰Šé™¤ã—ã¾ã™ã€‚
- `loadIntonationFavorites()` (src/intonation.ts): ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ã®ãŠæ°—ã«å…¥ã‚Šãƒªã‚¹ãƒˆã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚
- `persistIntonationFavorites(favorites: IntonationFavorite[])` (src/intonation.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ã®ãŠæ°—ã«å…¥ã‚Šãƒªã‚¹ãƒˆã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ã—ã¾ã™ã€‚
- `disableLoopOnIntonationEdit()` (src/intonation.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ç·¨é›†ä¸­ã«ãƒ«ãƒ¼ãƒ—å†ç”Ÿã‚’ç„¡åŠ¹ã«ã—ã¾ã™ã€‚
- `resetIntonationState()` (src/intonation.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³é–¢é€£ã®çŠ¶æ…‹ã‚’åˆæœŸåŒ–ã—ã¾ã™ã€‚
- `setStyleChangeHandler(handler: Function)` (src/intonation.ts): ã‚¹ã‚¿ã‚¤ãƒ«å¤‰æ›´æ™‚ã®ãƒãƒ³ãƒ‰ãƒ©ã‚’è¨­å®šã—ã¾ã™ã€‚
- `initializeIntonationElements()` (src/intonation.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ç·¨é›†ç”¨ã®UIè¦ç´ ã‚’åˆæœŸåŒ–ã—ã¾ã™ã€‚
- `isIntonationDirty()` (src/intonation.ts): ç¾åœ¨ã®ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ãŒç·¨é›†ã•ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’åˆ¤å®šã—ã¾ã™ã€‚
- `setIntonationKeyboardEnabled(enabled: boolean)` (src/intonation.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ç·¨é›†æ™‚ã®ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œã®æœ‰åŠ¹/ç„¡åŠ¹ã‚’è¨­å®šã—ã¾ã™ã€‚
- `getIntonationKeyboardEnabled()` (src/intonation.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ç·¨é›†æ™‚ã®ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œãŒæœ‰åŠ¹ã‹ã©ã†ã‹ã‚’è¿”ã—ã¾ã™ã€‚
- `applyPitchToQuery(query: AudioQuery, pitchPoints: PitchPoint[])` (src/intonation.ts): éŸ³å£°ã‚¯ã‚¨ãƒªã«ãƒ”ãƒƒãƒæƒ…å ±ã‚’é©ç”¨ã—ã¾ã™ã€‚
- `applyPitchEdit(editData: PitchEditData)` (src/intonation.ts): ãƒ”ãƒƒãƒç·¨é›†ãƒ‡ãƒ¼ã‚¿ã‚’é©ç”¨ã—ã€ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¤ºã‚’æ›´æ–°ã—ã¾ã™ã€‚
- `handleIntonationPointerDown(event: PointerEvent)` (src/intonation.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ£ãƒ¼ãƒˆä¸Šã§ã®ãƒã‚¤ãƒ³ã‚¿ãƒ¼æŠ¼ä¸‹ã‚¤ãƒ™ãƒ³ãƒˆã‚’å‡¦ç†ã—ã¾ã™ã€‚
- `handleIntonationPointerMove(event: PointerEvent)` (src/intonation.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ£ãƒ¼ãƒˆä¸Šã§ã®ãƒã‚¤ãƒ³ã‚¿ãƒ¼ç§»å‹•ã‚¤ãƒ™ãƒ³ãƒˆã‚’å‡¦ç†ã—ã¾ã™ã€‚
- `handleIntonationPointerUp(event: PointerEvent)` (src/intonation.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ£ãƒ¼ãƒˆä¸Šã§ã®ãƒã‚¤ãƒ³ã‚¿ãƒ¼é›¢ä¸Šã‚¤ãƒ™ãƒ³ãƒˆã‚’å‡¦ç†ã—ã¾ã™ã€‚
- `handleIntonationKeyDown(event: KeyboardEvent)` (src/intonation.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ£ãƒ¼ãƒˆä¸Šã§ã®ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æŠ¼ä¸‹ã‚¤ãƒ™ãƒ³ãƒˆã‚’å‡¦ç†ã—ã¾ã™ã€‚
- `renderIntonationFavoritesList()` (src/intonation.ts): ãŠæ°—ã«å…¥ã‚Šã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒªã‚¹ãƒˆã‚’UIã«æç”»ã—ã¾ã™ã€‚
- `removeIntonationFavorite(id: string)` (src/intonation.ts): æŒ‡å®šã•ã‚ŒãŸIDã®ãŠæ°—ã«å…¥ã‚Šã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤ã—ã¾ã™ã€‚
- `applyIntonationFavorite(id: string)` (src/intonation.ts): æŒ‡å®šã•ã‚ŒãŸIDã®ãŠæ°—ã«å…¥ã‚Šã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç¾åœ¨ã®ãƒ†ã‚­ã‚¹ãƒˆã«é©ç”¨ã—ã¾ã™ã€‚
- `saveCurrentIntonationFavorite(name: string)` (src/intonation.ts): ç¾åœ¨ã®ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹ã‚’ãŠæ°—ã«å…¥ã‚Šã¨ã—ã¦ä¿å­˜ã—ã¾ã™ã€‚
- `refreshIntonationChart()` (src/intonation.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ£ãƒ¼ãƒˆã®è¡¨ç¤ºã‚’æ›´æ–°ã—ã¾ã™ã€‚
- `getPitchRange(points: IntonationPoint[])` (src/intonationDisplay.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚¤ãƒ³ãƒˆã®ãƒ”ãƒƒãƒç¯„å›²ã‚’è¨ˆç®—ã—ã¾ã™ã€‚
- `calculateBasePadding(range: { min: number, max: number })` (src/intonationDisplay.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ£ãƒ¼ãƒˆã®ãƒ™ãƒ¼ã‚¹ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’è¨ˆç®—ã—ã¾ã™ã€‚
- `getBaseDisplayRange(range: { min: number, max: number }, padding: number)` (src/intonationDisplay.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ£ãƒ¼ãƒˆã®åŸºæœ¬è¡¨ç¤ºç¯„å›²ã‚’è¨ˆç®—ã—ã¾ã™ã€‚
- `calculateDisplayRange(baseRange: { min: number, max: number }, extra: number)` (src/intonationDisplay.ts): åŸºæœ¬è¡¨ç¤ºç¯„å›²ã«æŒ‡å®šã•ã‚ŒãŸã‚¨ã‚¯ã‚¹ãƒˆãƒ©ã‚’é©ç”¨ã—ã¦è¡¨ç¤ºç¯„å›²ã‚’è¨ˆç®—ã—ã¾ã™ã€‚
- `clampRangeExtra(extra: number)` (src/intonationDisplay.ts): è¡¨ç¤ºç¯„å›²ã®ã‚¨ã‚¯ã‚¹ãƒˆãƒ©å€¤ã‚’ã‚¯ãƒ©ãƒ³ãƒ—ã—ã¾ã™ã€‚
- `applyRangeExtra(range: { min: number, max: number }, extra: number)` (src/intonationDisplay.ts): è¡¨ç¤ºç¯„å›²ã«ã‚¨ã‚¯ã‚¹ãƒˆãƒ©å€¤ã‚’é©ç”¨ã—ã¾ã™ã€‚
- `refreshDisplayRange()` (src/intonationDisplay.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¤ºã®ç¯„å›²ã‚’æ›´æ–°ã—ã¾ã™ã€‚
- `clampPitchToDisplayRange(pitch: number)` (src/intonationDisplay.ts): ãƒ”ãƒƒãƒå€¤ã‚’è¡¨ç¤ºç¯„å›²å†…ã«ã‚¯ãƒ©ãƒ³ãƒ—ã—ã¾ã™ã€‚
- `calculateStepSize(range: { min: number, max: number })` (src/intonationDisplay.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ£ãƒ¼ãƒˆã®ã‚¹ãƒ†ãƒƒãƒ—ã‚µã‚¤ã‚ºã‚’è¨ˆç®—ã—ã¾ã™ã€‚
- `calculateLetterKeyAdjustment(letter: string)` (src/intonationDisplay.ts): ç‰¹å®šã®æ–‡å­—ã‚­ãƒ¼å…¥åŠ›ã«ã‚ˆã‚‹ãƒ”ãƒƒãƒèª¿æ•´é‡ã‚’è¨ˆç®—ã—ã¾ã™ã€‚
- `handleIntonationWheel(event: WheelEvent)` (src/intonationDisplay.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ£ãƒ¼ãƒˆä¸Šã§ã®ãƒ›ã‚¤ãƒ¼ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆã‚’å‡¦ç†ã—ã¾ã™ã€‚
- `ensureWheelHandler()` (src/intonationDisplay.ts): ãƒ›ã‚¤ãƒ¼ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãŒç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚
- `updateInitialRangeFromPoints(points: IntonationPoint[])` (src/intonationDisplay.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚¤ãƒ³ãƒˆã‹ã‚‰åˆæœŸè¡¨ç¤ºç¯„å›²ã‚’æ›´æ–°ã—ã¾ã™ã€‚
- `initializeIntonationCanvas(canvas: HTMLCanvasElement)` (src/intonationDisplay.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¤ºç”¨ã®Canvasè¦ç´ ã‚’åˆæœŸåŒ–ã—ã¾ã™ã€‚
- `buildIntonationPointsFromQuery(audioQuery: AudioQuery)` (src/intonationDisplay.ts): éŸ³å£°ã‚¯ã‚¨ãƒªã‹ã‚‰ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¤ºç”¨ã®ãƒã‚¤ãƒ³ãƒˆã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚
- `renderIntonationLabels(ctx: CanvasRenderingContext2D, displayRange: { min: number, max: number }, step: number)` (src/intonationDisplay.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ£ãƒ¼ãƒˆã®ãƒ©ãƒ™ãƒ«ã‚’æç”»ã—ã¾ã™ã€‚
- `drawIntonationChart(ctx: CanvasRenderingContext2D, points: IntonationPoint[], displayRange: { min: number, max: number })` (src/intonationDisplay.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ£ãƒ¼ãƒˆæœ¬ä½“ã‚’æç”»ã—ã¾ã™ã€‚
- `adjustIntonationScale(scaleFactor: number, clientY: number)` (src/intonationDisplay.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ã®è¡¨ç¤ºã‚¹ã‚±ãƒ¼ãƒ«ã‚’èª¿æ•´ã—ã¾ã™ã€‚
- `pitchFromY(y: number, displayRange: { min: number, max: number })` (src/intonationDisplay.ts): Canvasã®Yåº§æ¨™ã‹ã‚‰ãƒ”ãƒƒãƒå€¤ã‚’è¨ˆç®—ã—ã¾ã™ã€‚
- `findNearestIntonationPoint(x: number, y: number, points: IntonationPoint[], tolerance: number)` (src/intonationDisplay.ts): æŒ‡å®šåº§æ¨™ã«æœ€ã‚‚è¿‘ã„ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚¤ãƒ³ãƒˆã‚’æ¤œç´¢ã—ã¾ã™ã€‚
- `scheduleIntonationPlayback(audioQuery: AudioQuery)` (src/intonationPlayback.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ç·¨é›†å¾Œã®éŸ³å£°å†ç”Ÿã‚’ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã—ã¾ã™ã€‚
- `replayCachedIntonationAudio()` (src/intonationPlayback.ts): ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚ŒãŸã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³éŸ³å£°ã‚’å†ç”Ÿã—ã¾ã™ã€‚
- `showPlaybackStatus(message: string)` (src/intonationPlayback.ts): å†ç”Ÿã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’UIã«è¡¨ç¤ºã—ã¾ã™ã€‚
- `playUpdatedIntonation(audioQuery: AudioQuery)` (src/intonationPlayback.ts): æ›´æ–°ã•ã‚ŒãŸã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ã§éŸ³å£°ã‚’å†ç”Ÿã—ã¾ã™ã€‚
- `fetchAndRenderIntonation(text: string, speaker: number)` (src/intonationPlayback.ts): ãƒ†ã‚­ã‚¹ãƒˆã¨è©±è€…ã‚¹ã‚¿ã‚¤ãƒ«ã«åŸºã¥ã„ã¦ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ•ã‚§ãƒƒãƒã—ã€æç”»ã—ã¾ã™ã€‚
- `resetIntonationToInitial()` (src/intonationPlayback.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¤ºã‚’åˆæœŸçŠ¶æ…‹ã«ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã€‚
- `updateIntonationTiming(offset: number, duration: number)` (src/intonationState.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°æƒ…å ±ã‚’æ›´æ–°ã—ã¾ã™ã€‚
- `isValidAudioQueryShape(query: any)` (src/intonationUtils.ts): ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæœ‰åŠ¹ãªAudioQueryã®å½¢çŠ¶ã§ã‚ã‚‹ã‹ã‚’æ¤œè¨¼ã—ã¾ã™ã€‚
- `cloneAudioQuery(query: AudioQuery)` (src/intonationUtils.ts): AudioQueryã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ‡ã‚£ãƒ¼ãƒ—ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¾ã™ã€‚
- `applyStyleSelection(styleId: string)` (src/main.ts): æŒ‡å®šã•ã‚ŒãŸã‚¹ã‚¿ã‚¤ãƒ«IDã‚’é©ç”¨ã—ã€UIã‚’æ›´æ–°ã—ã¾ã™ã€‚
- `applyRandomStyleSelection()` (src/main.ts): ãƒ©ãƒ³ãƒ€ãƒ ãªã‚¹ã‚¿ã‚¤ãƒ«ã‚’é¸æŠã—ã¦é©ç”¨ã—ã¾ã™ã€‚
- `saveDelimiter()` (src/main.ts): åŒºåˆ‡ã‚Šæ–‡å­—è¨­å®šã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ã—ã¾ã™ã€‚
- `scheduleSaveDelimiter()` (src/main.ts): åŒºåˆ‡ã‚Šæ–‡å­—è¨­å®šã®ä¿å­˜ã‚’ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã—ã¾ã™ã€‚
- `updateSpectrogramScaleLabel(scale: number)` (src/main.ts): ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ ã®ã‚¹ã‚±ãƒ¼ãƒ«ãƒ©ãƒ™ãƒ«ã‚’æ›´æ–°ã—ã¾ã™ã€‚
- `updateIntonationKeyboardToggle(enabled: boolean)` (src/main.ts): ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒˆã‚°ãƒ«ã®çŠ¶æ…‹ã‚’æ›´æ–°ã—ã¾ã™ã€‚
- `setLoopCheckboxElement(element: HTMLInputElement)` (src/playback.ts): ãƒ«ãƒ¼ãƒ—ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹è¦ç´ ã‚’è¨­å®šã—ã¾ã™ã€‚
- `setPlayButtonAppearance(playing: boolean)` (src/playback.ts): å†ç”Ÿãƒœã‚¿ãƒ³ã®å¤–è¦³ã‚’æ›´æ–°ã—ã¾ã™ã€‚
- `isPlayRequestPending()` (src/playback.ts): å†ç”Ÿãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒä¿ç•™ä¸­ã‹ã©ã†ã‹ã‚’åˆ¤å®šã—ã¾ã™ã€‚
- `stopPlaybackAndResetLoop()` (src/playback.ts): å†ç”Ÿã‚’åœæ­¢ã—ã€ãƒ«ãƒ¼ãƒ—è¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã€‚
- `getAudioCacheKey(text: string, styleId: string)` (src/playback.ts): éŸ³å£°ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ã‚­ãƒ¼ã‚’ç”Ÿæˆã—ã¾ã™ã€‚
- `setTextAndPlay(text: string, styleId: string, charaId: number)` (src/playback.ts): ãƒ†ã‚­ã‚¹ãƒˆã¨ã‚¹ã‚¿ã‚¤ãƒ«ã‚’è¨­å®šã—ã€å†ç”Ÿã‚’é–‹å§‹ã—ã¾ã™ã€‚
- `downloadLastAudio()` (src/playback.ts): æœ€å¾Œã«å†ç”Ÿã•ã‚ŒãŸéŸ³å£°ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚
- `scheduleAutoPlay(text: string, styleId: string, charaId: number)` (src/playback.ts): è‡ªå‹•å†ç”Ÿã‚’ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã—ã¾ã™ã€‚
- `confirmResetIntonationBeforePlay()` (src/playback.ts): å†ç”Ÿå‰ã«ã‚¤ãƒ³ãƒˆãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒªã‚»ãƒƒãƒˆã®ç¢ºèªã‚’è¡Œã„ã¾ã™ã€‚
- `handlePlayButtonClick()` (src/playback.ts): å†ç”Ÿãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’å‡¦ç†ã—ã¾ã™ã€‚
- `handlePlay(text: string, styleId: string, charaId: number)` (src/playback.ts): éŸ³å£°å†ç”Ÿã®ä¸»è¦ãªãƒ­ã‚¸ãƒƒã‚¯ã‚’å‡¦ç†ã—ã¾ã™ã€‚
- `clearRealtimeWaveformCanvas()` (src/playback.ts): ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ³¢å½¢è¡¨ç¤ºã‚­ãƒ£ãƒ³ãƒã‚¹ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã™ã€‚
- `triggerPlay(text: string, styleId: string, charaId: number)` (src/playback.ts): éŸ³å£°å†ç”Ÿã‚’ãƒˆãƒªã‚¬ãƒ¼ã—ã¾ã™ã€‚
- `cleanup()` (src/playback.ts): å†ç”Ÿé–¢é€£ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã—ã¾ã™ã€‚
- `handleReset()` (src/playback.ts): ãƒªã‚»ãƒƒãƒˆã‚¤ãƒ™ãƒ³ãƒˆã‚’å‡¦ç†ã—ã¾ã™ã€‚
- `handleCancel()` (src/playback.ts): ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆã‚’å‡¦ç†ã—ã¾ã™ã€‚
- `showStatus(message: string)` (src/status.ts): ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’UIã«è¡¨ç¤ºã—ã¾ã™ã€‚
- `hideStatus()` (src/status.ts): ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’éè¡¨ç¤ºã«ã—ã¾ã™ã€‚
- `scheduleHideStatus()` (src/status.ts): ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®éè¡¨ç¤ºã‚’ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã—ã¾ã™ã€‚
- `invalidateColorVariableCache()` (src/status.ts): ã‚«ãƒ©ãƒ¼å¤‰æ•°ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ç„¡åŠ¹åŒ–ã—ã¾ã™ã€‚
- `getColorVariable(name: string)` (src/status.ts): CSSã‚«ã‚¹ã‚¿ãƒ å¤‰æ•°ã‹ã‚‰è‰²ã‚’å–å¾—ã—ã¾ã™ã€‚
- `getSelectedStyleId()` (src/styleManager.ts): ç¾åœ¨é¸æŠã•ã‚Œã¦ã„ã‚‹ã‚¹ã‚¿ã‚¤ãƒ«IDã‚’è¿”ã—ã¾ã™ã€‚
- `setSelectedStyleId(styleId: string)` (src/styleManager.ts): ã‚¹ã‚¿ã‚¤ãƒ«IDã‚’è¨­å®šã—ã€UIã‚’æ›´æ–°ã—ã¾ã™ã€‚
- `selectRandomStyleId()` (src/styleManager.ts): ãƒ©ãƒ³ãƒ€ãƒ ãªã‚¹ã‚¿ã‚¤ãƒ«IDã‚’é¸æŠã—ã¾ã™ã€‚
- `getStyleLabel(style: any)` (src/styleManager.ts): ã‚¹ã‚¿ã‚¤ãƒ«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰è¡¨ç¤ºãƒ©ãƒ™ãƒ«ã‚’ç”Ÿæˆã—ã¾ã™ã€‚
- `getStyleById(styleId: string)` (src/styleManager.ts): æŒ‡å®šã•ã‚ŒãŸIDã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã—ã¾ã™ã€‚
- `getSpeakerStylesByStyleId(styleId: string)` (src/styleManager.ts): æŒ‡å®šã•ã‚ŒãŸã‚¹ã‚¿ã‚¤ãƒ«IDã«å±ã™ã‚‹è©±è€…ã‚¹ã‚¿ã‚¤ãƒ«ãƒªã‚¹ãƒˆã‚’è¿”ã—ã¾ã™ã€‚
- `resolveStyleMarker(styleId: string)` (src/styleManager.ts): ã‚¹ã‚¿ã‚¤ãƒ«IDã‹ã‚‰ãƒãƒ¼ã‚«ãƒ¼ï¼ˆçµµæ–‡å­—ãªã©ï¼‰ã‚’è§£æ±ºã—ã¾ã™ã€‚
- `parseDelimiterConfig(text: string)` (src/styleManager.ts): ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰åŒºåˆ‡ã‚Šæ–‡å­—è¨­å®šã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¾ã™ã€‚
- `addSegment(segment: string, type: string)` (src/styleManager.ts): ãƒ†ã‚­ã‚¹ãƒˆã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ ã—ã¾ã™ã€‚
- `buildTextSegments(text: string, delimiter: string)` (src/styleManager.ts): ãƒ†ã‚­ã‚¹ãƒˆã‚’åŒºåˆ‡ã‚Šæ–‡å­—ã§ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã«åˆ†å‰²ã—ã¾ã™ã€‚
- `populateStyleSelect(styles: any[], currentStyleId: string)` (src/styleManager.ts): ã‚¹ã‚¿ã‚¤ãƒ«é¸æŠUIã‚’è©±è€…æƒ…å ±ã§åŸ‹ã‚ã¾ã™ã€‚
- `populateSpeakerStyleSelect(speakerId: number, currentStyleId: string)` (src/styleManager.ts): è©±è€…ã‚¹ã‚¿ã‚¤ãƒ«é¸æŠUIã‚’åŸ‹ã‚ã¾ã™ã€‚
- `fetchVoiceStyles()` (src/styleManager.ts): VOICEVOX APIã‹ã‚‰åˆ©ç”¨å¯èƒ½ãªãƒœã‚¤ã‚¹ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ãƒ•ã‚§ãƒƒãƒã—ã¾ã™ã€‚
- `loadStoredList(key: string)` (src/textLists.ts): ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰æŒ‡å®šã‚­ãƒ¼ã®ãƒªã‚¹ãƒˆã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚
- `persistList(key: string, list: string[])` (src/textLists.ts): æŒ‡å®šã‚­ãƒ¼ã®ãƒªã‚¹ãƒˆã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ã—ã¾ã™ã€‚
- `persistLists()` (src/textLists.ts): å…¨ã¦ã®ãƒ†ã‚­ã‚¹ãƒˆãƒªã‚¹ãƒˆã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ã—ã¾ã™ã€‚
- `dedupeAndLimit(list: string[], limit: number)` (src/textLists.ts): ãƒªã‚¹ãƒˆã‹ã‚‰é‡è¤‡ã‚’å‰Šé™¤ã—ã€æŒ‡å®šã•ã‚ŒãŸåˆ¶é™æ•°ã«ã‚«ãƒƒãƒˆã—ã¾ã™ã€‚
- `renderList(containerId: string, list: string[], itemClickHandler: (item: string) => void)` (src/textLists.ts): æŒ‡å®šã‚³ãƒ³ãƒ†ãƒŠã«ãƒªã‚¹ãƒˆã‚’æç”»ã—ã¾ã™ã€‚
- `renderTextLists()` (src/textLists.ts): å±¥æ­´ã¨ãŠæ°—ã«å…¥ã‚Šãƒ†ã‚­ã‚¹ãƒˆãƒªã‚¹ãƒˆã‚’UIã«æç”»ã—ã¾ã™ã€‚
- `moveToFavorites(text: string)` (src/textLists.ts): ãƒ†ã‚­ã‚¹ãƒˆã‚’å±¥æ­´ã‹ã‚‰ãŠæ°—ã«å…¥ã‚Šã«ç§»å‹•ã—ã¾ã™ã€‚
- `moveToHistory(text: string)` (src/textLists.ts): ãƒ†ã‚­ã‚¹ãƒˆã‚’ãŠæ°—ã«å…¥ã‚Šã‹ã‚‰å±¥æ­´ã«ç§»å‹•ã—ã¾ã™ã€‚
- `addToHistory(text: string)` (src/textLists.ts): ãƒ†ã‚­ã‚¹ãƒˆã‚’å±¥æ­´ã«è¿½åŠ ã—ã¾ã™ã€‚
- `initializeTextLists()` (src/textLists.ts): ãƒ†ã‚­ã‚¹ãƒˆãƒªã‚¹ãƒˆæ©Ÿèƒ½ã‚’åˆæœŸåŒ–ã—ã¾ã™ã€‚
- `updateExportButtonState()` (src/uiControls.ts): ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒœã‚¿ãƒ³ã®çŠ¶æ…‹ã‚’æ›´æ–°ã—ã¾ã™ã€‚
- `prepareCanvas(canvas: HTMLCanvasElement)` (src/visualization/canvas.ts): Canvasè¦ç´ ã‚’æº–å‚™ã—ã€2Dã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’è¿”ã—ã¾ã™ã€‚
- `getHannWindow(length: number)` (src/visualization/fft.ts): æŒ‡å®šã•ã‚ŒãŸé•·ã•ã®ãƒãƒ‹ãƒ³ã‚°çª“é–¢æ•°ã‚’ç”Ÿæˆã—ã¾ã™ã€‚
- `fftRadix2(re: Float32Array, im: Float32Array)` (src/visualization/fft.ts): ãƒ©ãƒ‡ã‚£ãƒƒã‚¯ã‚¹2FFTã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
- `getMaxFreqByThreshold(fftData: Float32Array, sampleRate: number, threshold: number)` (src/visualization/fftMaxFreq.ts): FFTãƒ‡ãƒ¼ã‚¿ã‹ã‚‰é–¾å€¤ä»¥ä¸Šã®æœ€å¤§å‘¨æ³¢æ•°ã¨æŒ¯å¹…ã‚’æ¤œå‡ºã—ã¾ã™ã€‚
- `drawRealtimeFFT(ctx: CanvasRenderingContext2D, analyzer: AnalyserNode, width: number, height: number, sampleRate: number)` (src/visualization/fftOverlay.ts): ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ FFTã‚’Canvasã«æç”»ã—ã¾ã™ã€‚
- `getTopFreqInfo(fft: Float32Array, sampleRate: number, width: number, height: number, canvasHeight: number)` (src/visualization/fftOverlay.ts): FFTãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ãƒ”ãƒ¼ã‚¯å‘¨æ³¢æ•°ãªã©ã®ãƒˆãƒƒãƒ—æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚
- `findPeakPosition(data: Float32Array, binSize: number)` (src/visualization/fftOverlay.ts): ãƒ‡ãƒ¼ã‚¿é…åˆ—å†…ã®ãƒ”ãƒ¼ã‚¯ä½ç½®ã‚’æ¤œç´¢ã—ã¾ã™ã€‚
- `drawPeakLine(ctx: CanvasRenderingContext2D, x: number, y: number, height: number, color: string)` (src/visualization/fftOverlay.ts): ãƒ”ãƒ¼ã‚¯ãƒ©ã‚¤ãƒ³ã‚’Canvasã«æç”»ã—ã¾ã™ã€‚
- `drawFFTLine(ctx: CanvasRenderingContext2D, fft: Float32Array, width: number, height: number, canvasHeight: number)` (src/visualization/fftOverlay.ts): FFTãƒ©ã‚¤ãƒ³ã‚’Canvasã«æç”»ã—ã¾ã™ã€‚
- `drawTopBinLine(ctx: CanvasRenderingContext2D, freq: number, sampleRate: number, width: number, height: number, canvasHeight: number)` (src/visualization/fftOverlay.ts): ãƒˆãƒƒãƒ—ãƒ“ãƒ³å‘¨æ³¢æ•°ãƒ©ã‚¤ãƒ³ã‚’Canvasã«æç”»ã—ã¾ã™ã€‚
- `drawPeakLabel(ctx: CanvasRenderingContext2D, freq: number, y: number, db: number, width: number, color: string)` (src/visualization/fftOverlay.ts): ãƒ”ãƒ¼ã‚¯å‘¨æ³¢æ•°ã¨ãƒ‡ã‚·ãƒ™ãƒ«ã®ãƒ©ãƒ™ãƒ«ã‚’Canvasã«æç”»ã—ã¾ã™ã€‚
- `xToFreq(x: number, width: number, sampleRate: number)` (src/visualization/fftUtils.ts): Canvasã®Xåº§æ¨™ã‹ã‚‰å‘¨æ³¢æ•°ã«å¤‰æ›ã—ã¾ã™ã€‚
- `freqToBinF(freq: number, sampleRate: number, fftSize: number)` (src/visualization/fftUtils.ts): å‘¨æ³¢æ•°ã‹ã‚‰FFTãƒ“ãƒ³ç•ªå·ã«å¤‰æ›ã—ã¾ã™ã€‚
- `getInterpolatedValue(data: Float32Array, index: number)` (src/visualization/fftUtils.ts): é…åˆ—ã®æŒ‡å®šã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å€¤ã‚’ç·šå½¢è£œé–“ã—ã¦å–å¾—ã—ã¾ã™ã€‚
- `fftValueToY(value: number, height: number, canvasHeight: number)` (src/visualization/fftUtils.ts): FFTå€¤ã‚’Canvasã®Yåº§æ¨™ã«å¤‰æ›ã—ã¾ã™ã€‚
- `lerpColor(a: number[], b: number[], amount: number)` (src/visualization/spectrogram.ts): 2ã¤ã®è‰²ã®é–“ã§ç·šå½¢è£œé–“ã‚’è¡Œã„ã¾ã™ã€‚
- `mapIntensityToSpectrogramColor(intensity: number)` (src/visualization/spectrogram.ts): å¼·åº¦å€¤ã‚’ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ ã®è‰²ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã—ã¾ã™ã€‚
- `determineSpectrogramCeiling(buffer: AudioBuffer)` (src/visualization/spectrogram.ts): ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ ã®å¤©äº•ï¼ˆæœ€å¤§å¼·åº¦ï¼‰ã‚’æ±ºå®šã—ã¾ã™ã€‚
- `analyzeSpectrogramFrames(audioBuffer: AudioBuffer, fftSize: number, hopLength: number)` (src/visualization/spectrogram.ts): éŸ³å£°ãƒãƒƒãƒ•ã‚¡ã‚’åˆ†æã—ã€ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ç”Ÿæˆã—ã¾ã™ã€‚
- `drawSpectrogram(ctx: CanvasRenderingContext2D, spectrogramData: Float32Array[], width: number, height: number, duration: number, audioSampleRate: number, fftSize: number, hopLength: number, maxIntensity: number, spectrogramScale: number)` (src/visualization/spectrogram.ts): ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ ã‚’Canvasã«æç”»ã—ã¾ã™ã€‚
- `drawSpectrogramColumn(ctx: CanvasRenderingContext2D, columnData: Float32Array, x: number, columnWidth: number, height: number, maxIntensity: number, spectrogramScale: number)` (src/visualization/spectrogram.ts): ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ ã®å˜ä¸€ã®åˆ—ã‚’æç”»ã—ã¾ã™ã€‚
- `drawOfflineSpectrogram(ctx: CanvasRenderingContext2D, audioBuffer: AudioBuffer, width: number, height: number, duration: number, sampleRate: number, maxIntensity: number, spectrogramScale: number, cachedImage?: HTMLImageElement)` (src/visualization/spectrogram.ts): ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã®éŸ³å£°ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ ã‚’æç”»ã—ã¾ã™ã€‚
- `computeAudioContentHash(audioBuffer: AudioBuffer)` (src/visualization/spectrogram.ts): AudioBufferã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒãƒƒã‚·ãƒ¥ã‚’è¨ˆç®—ã—ã¾ã™ã€‚
- `buildSpectrogramSignature(audioBuffer: AudioBuffer)` (src/visualization/spectrogram.ts): ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ ã®ç½²åï¼ˆãƒãƒƒã‚·ãƒ¥ï¼‰ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚
- `processChunk(channelData: Float32Array)` (src/visualization/spectrogram.ts): ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒãƒ£ãƒ³ã‚¯ã‚’å‡¦ç†ã—ã¾ã™ã€‚
- `formatTimeLabel(seconds: number)` (src/visualization/timeAxis.ts): ç§’æ•°ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã•ã‚ŒãŸæ™‚é–“ãƒ©ãƒ™ãƒ«ã«å¤‰æ›ã—ã¾ã™ã€‚
- `buildTimeTicks(duration: number, width: number)` (src/visualization/timeAxis.ts): æ™‚é–“è»¸ã®ç›®ç››ã‚Šä½ç½®ã‚’è¨ˆç®—ã—ã¾ã™ã€‚
- `drawTimeTicks(ctx: CanvasRenderingContext2D, duration: number, width: number, height: number)` (src/visualization/timeAxis.ts): æ™‚é–“è»¸ã®ç›®ç››ã‚Šã¨ãƒ©ãƒ™ãƒ«ã‚’Canvasã«æç”»ã—ã¾ã™ã€‚
- `computeSegmentStats(buffer: AudioBuffer, start: number, end: number)` (src/visualization/waveform.ts): éŸ³å£°ãƒãƒƒãƒ•ã‚¡ã®æŒ‡å®šã‚»ã‚°ãƒ¡ãƒ³ãƒˆã®çµ±è¨ˆæƒ…å ±ã‚’è¨ˆç®—ã—ã¾ã™ã€‚
- `computeSegmentCorrelation(buffer1: AudioBuffer, start1: number, end1: number, buffer2: AudioBuffer, start2: number, end2: number)` (src/visualization/waveform.ts): 2ã¤ã®éŸ³å£°ã‚»ã‚°ãƒ¡ãƒ³ãƒˆé–“ã®ç›¸é–¢ã‚’è¨ˆç®—ã—ã¾ã™ã€‚
- `extractAlignedRealtimeSegment(audioBuffer: AudioBuffer, currentTime: number, segmentDuration: number, sampleRate: number)` (src/visualization/waveform.ts): ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å†ç”Ÿä½ç½®ã«åˆã‚ã›ãŸéŸ³å£°ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚’æŠ½å‡ºã—ã¾ã™ã€‚
- `drawRenderedWaveform(ctx: CanvasRenderingContext2D, audioBuffer: AudioBuffer, width: number, height: number)` (src/visualization/waveform.ts): ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚ŒãŸï¼ˆåˆæˆæ¸ˆã¿ã®ï¼‰æ³¢å½¢ã‚’Canvasã«æç”»ã—ã¾ã™ã€‚
- `drawRealtimeWaveformBackground(ctx: CanvasRenderingContext2D, width: number, height: number)` (src/visualization/waveform.ts): ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ³¢å½¢è¡¨ç¤ºã®èƒŒæ™¯ã‚’æç”»ã—ã¾ã™ã€‚
- `drawRealtimeWaveformOnly(ctx: CanvasRenderingContext2D, audioBuffer: AudioBuffer, offset: number, width: number, height: number)` (src/visualization/waveform.ts): ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ³¢å½¢ã®ä¸€éƒ¨ã®ã¿ã‚’Canvasã«æç”»ã—ã¾ã™ã€‚
- `getSpectrogramScale()` (src/visualization.ts): ç¾åœ¨ã®ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ ã‚¹ã‚±ãƒ¼ãƒ«ã‚’å–å¾—ã—ã¾ã™ã€‚
- `setSpectrogramScale(scale: number)` (src/visualization.ts): ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ ã‚¹ã‚±ãƒ¼ãƒ«ã‚’è¨­å®šã—ã¾ã™ã€‚
- `requestSpectrogramReset()` (src/visualization.ts): ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ ã®ãƒªã‚»ãƒƒãƒˆã‚’è¦æ±‚ã—ã¾ã™ã€‚
- `isPlaybackActive()` (src/visualization.ts): ç¾åœ¨å†ç”ŸãŒã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‹ã©ã†ã‹ã‚’åˆ¤å®šã—ã¾ã™ã€‚
- `stopActivePlayback()` (src/visualization.ts): ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªå†ç”Ÿã‚’åœæ­¢ã—ã¾ã™ã€‚
- `initializeVisualizationCanvases(waveformCanvas: HTMLCanvasElement, spectrogramCanvas: HTMLCanvasElement, fftCanvas: HTMLCanvasElement)` (src/visualization.ts): å¯è¦–åŒ–ç”¨ã®Canvasè¦ç´ ã‚’åˆæœŸåŒ–ã—ã¾ã™ã€‚
- `clearWaveformCanvas()` (src/visualization.ts): æ³¢å½¢è¡¨ç¤ºCanvasã‚’ã‚¯ãƒªã‚¢ã—ã¾ã™ã€‚
- `createSpectrogramImageCache(audioBuffer: AudioBuffer, spectrogramScale: number)` (src/visualization.ts): ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ ã®ç”»åƒã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ç”Ÿæˆã—ã¾ã™ã€‚
- `analyzeAndCacheSpectrogram(audioBuffer: AudioBuffer, spectrogramScale: number)` (src/visualization.ts): ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ ã‚’åˆ†æã—ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¾ã™ã€‚
- `handleSpectrogramInitialization(audioBuffer: AudioBuffer)` (src/visualization.ts): ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ ã®åˆæœŸåŒ–å‡¦ç†ã‚’ãƒãƒ³ãƒ‰ãƒ«ã—ã¾ã™ã€‚
- `playAudio(audioBuffer: AudioBuffer, text: string, speaker: number)` (src/visualization.ts): AudioBufferã‚’å†ç”Ÿã—ã¾ã™ã€‚
- `setProgressPosition(position: number)` (src/visualization.ts): å†ç”Ÿãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã®ä½ç½®ã‚’è¨­å®šã—ã¾ã™ã€‚
- `updateProgressLines(duration: number, currentTime: number, width: number)` (src/visualization.ts): ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒ©ã‚¤ãƒ³ã‚’æ›´æ–°ã—ã¾ã™ã€‚
- `clearProgressLines()` (src/visualization.ts): ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒ©ã‚¤ãƒ³ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã™ã€‚
- `drawRealtimeVisuals(audioBuffer: AudioBuffer, currentTime: number)` (src/visualization.ts): ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®å¯è¦–åŒ–è¦ç´ ã‚’æç”»ã—ã¾ã™ã€‚
- `handleSpectrogramDraw()` (src/visualization.ts): ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ ã®æç”»ã‚’ãƒãƒ³ãƒ‰ãƒ«ã—ã¾ã™ã€‚
- `cleanupPlayback()` (src/visualization.ts): å†ç”Ÿçµ‚äº†å¾Œã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å‡¦ç†ã‚’è¡Œã„ã¾ã™ã€‚
- `requestSpectrogramDraw()` (src/visualization.ts): ã‚¹ãƒšã‚¯ãƒˆãƒ­ã‚°ãƒ©ãƒ ã®æç”»ã‚’è¦æ±‚ã—ã¾ã™ã€‚
- `render()` (src/visualization.ts): æç”»ãƒ«ãƒ¼ãƒ—ã‚’é–‹å§‹ã—ã¾ã™ã€‚
- `finalize()` (src/visualization.ts): æœ€çµ‚å‡¦ç†ã‚’è¡Œã„ã¾ã™ã€‚
- `stopPlayback()` (src/visualization.ts): å†ç”Ÿã‚’åœæ­¢ã—ã¾ã™ã€‚

## é–¢æ•°å‘¼ã³å‡ºã—éšå±¤ãƒ„ãƒªãƒ¼
```
- getAudioQuery (src/audio.ts)
  - synthesize ()
    - combineAudioBuffers ()
    - encodeAudioBufferToWav ()
    - writeString ()
    - clamp ()
- dedupeIntonationFavorites (src/intonation.ts)
  - loadIntonationFavorites ()
    - persistIntonationFavorites ()
    - disableLoopOnIntonationEdit ()
    - resetIntonationState ()
    - setStyleChangeHandler ()
    - initializeIntonationElements ()
    - isIntonationDirty ()
    - setIntonationKeyboardEnabled ()
    - getIntonationKeyboardEnabled ()
    - applyPitchToQuery ()
    - applyPitchEdit ()
    - handleIntonationPointerDown ()
    - handleIntonationPointerMove ()
    - handleIntonationPointerUp ()
    - handleIntonationKeyDown ()
    - renderIntonationFavoritesList ()
    - removeIntonationFavorite ()
    - applyIntonationFavorite ()
    - saveCurrentIntonationFavorite ()
    - refreshIntonationChart ()
    - getBaseDisplayRange ()
    - applyRangeExtra ()
    - refreshDisplayRange ()
    - clampPitchToDisplayRange ()
    - calculateLetterKeyAdjustment ()
    - ensureWheelHandler ()
    - updateInitialRangeFromPoints ()
    - buildIntonationPointsFromQuery ()
    - drawIntonationChart ()
    - pitchFromY ()
    - findNearestIntonationPoint ()
    - scheduleIntonationPlayback ()
    - replayCachedIntonationAudio ()
    - showPlaybackStatus ()
    - playUpdatedIntonation ()
    - updateIntonationTiming ()
    - isValidAudioQueryShape ()
    - cloneAudioQuery ()
    - showStatus ()
    - scheduleHideStatus ()
- getPitchRange (src/intonationDisplay.ts)
  - calculateBasePadding ()
    - calculateDisplayRange ()
    - clampRangeExtra ()
    - calculateStepSize ()
    - handleIntonationWheel ()
    - initializeIntonationCanvas ()
    - renderIntonationLabels ()
    - adjustIntonationScale ()
    - getColorVariable ()
- fetchAndRenderIntonation ()
  - resetIntonationToInitial ()
    - updateExportButtonState ()
    - drawRenderedWaveform ()
    - initializeVisualizationCanvases ()
    - playAudio ()
- applyStyleSelection (src/main.ts)
  - applyRandomStyleSelection ()
    - updateSpectrogramScaleLabel ()
    - updateIntonationKeyboardToggle ()
    - setLoopCheckboxElement ()
    - setPlayButtonAppearance ()
    - isPlayRequestPending ()
    - handlePlay ()
    - getSelectedStyleId ()
    - setSelectedStyleId ()
    - selectRandomStyleId ()
    - populateStyleSelect ()
    - populateSpeakerStyleSelect ()
    - fetchVoiceStyles ()
    - initializeTextLists ()
    - getSpectrogramScale ()
    - setSpectrogramScale ()
    - isPlaybackActive ()
- stopPlaybackAndResetLoop ()
  - getAudioCacheKey ()
    - setTextAndPlay ()
    - downloadLastAudio ()
    - scheduleAutoPlay ()
    - confirmResetIntonationBeforePlay ()
    - handlePlayButtonClick ()
    - clearRealtimeWaveformCanvas ()
    - cleanup ()
    - handleCancel ()
    - parseDelimiterConfig ()
    - buildTextSegments ()
    - addToHistory ()
    - stopActivePlayback ()
- hideStatus ()
  - invalidateColorVariableCache ()
- getStyleLabel ()
  - getStyleById ()
    - getSpeakerStylesByStyleId ()
    - resolveStyleMarker ()
    - addSegment ()
- loadStoredList (src/textLists.ts)
  - persistList ()
    - persistLists ()
    - dedupeAndLimit ()
    - renderList ()
    - renderTextLists ()
    - moveToFavorites ()
    - moveToHistory ()
- prepareCanvas (src/visualization/canvas.ts)
- getHannWindow (src/visualization/fft.ts)
  - fftRadix2 ()
    - getMaxFreqByThreshold (src/visualization/fftMaxFreq.ts)
- drawRealtimeFFT ()
  - getTopFreqInfo ()
    - findPeakPosition ()
    - drawPeakLine ()
    - drawFFTLine ()
    - drawTopBinLine ()
    - drawPeakLabel ()
    - xToFreq ()
    - freqToBinF ()
    - getInterpolatedValue ()
    - fftValueToY ()
- lerpColor (src/visualization/spectrogram.ts)
  - mapIntensityToSpectrogramColor ()
    - determineSpectrogramCeiling ()
    - analyzeSpectrogramFrames ()
    - drawSpectrogram ()
    - drawSpectrogramColumn ()
    - drawOfflineSpectrogram ()
    - computeAudioContentHash ()
    - buildSpectrogramSignature ()
    - processChunk ()
    - drawTimeTicks ()
- formatTimeLabel (src/visualization/timeAxis.ts)
  - buildTimeTicks ()
- computeSegmentStats (src/visualization/waveform.ts)
  - computeSegmentCorrelation ()
    - extractAlignedRealtimeSegment ()
    - drawRealtimeWaveformBackground ()
    - drawRealtimeWaveformOnly ()
- requestSpectrogramReset ()
  - clearWaveformCanvas ()
    - createSpectrogramImageCache ()
    - analyzeAndCacheSpectrogram ()
    - handleSpectrogramInitialization ()
    - setProgressPosition ()
    - updateProgressLines ()
    - clearProgressLines ()
    - drawRealtimeVisuals ()
    - handleSpectrogramDraw ()
    - cleanupPlayback ()
    - requestSpectrogramDraw ()
    - render ()
    - finalize ()
    - stopPlayback ()
- saveDelimiter (src/main.ts)
- scheduleSaveDelimiter (src/main.ts)
- triggerPlay (src/playback.ts)
- handleReset (src/playback.ts)

---
Generated at: 2026-02-20 07:05:47 JST
